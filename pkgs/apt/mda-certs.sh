#:Adds the MDA Root Certificate and MDA Intermediate Certificate as trusted CA certs
#:so SSL connections work when connected to the MDA Network.

mdaCertDir="/usr/local/share/ca-certificates/mda"

if [ ! -d "$mdaCertDir" ]; then
    sudo mkdir $mdaCertDir
    sudo chmod 755 $mdaCertDir
fi

sudo cat << EOC > /tmp/mda-root.crt
-----BEGIN CERTIFICATE-----
MIIEzTCCA7WgAwIBAgIQOLyrnCT3uLZFklVHK+Z6GzANBgkqhkiG9w0BAQsFADBo
MRIwEAYKCZImiZPyLGQBGRYCQ0ExEzARBgoJkiaJk/IsZAEZFgNNREExEjAQBgoJ
kiaJk/IsZAEZFgJEUzEpMCcGA1UEAxMgTURBIFJvb3QgQ2VydGlmaWNhdGlvbiBB
dXRob3JpdHkwHhcNMTUwNzIzMTg1NTMxWhcNMzUwNzIzMTkwNTMxWjBoMRIwEAYK
CZImiZPyLGQBGRYCQ0ExEzARBgoJkiaJk/IsZAEZFgNNREExEjAQBgoJkiaJk/Is
ZAEZFgJEUzEpMCcGA1UEAxMgTURBIFJvb3QgQ2VydGlmaWNhdGlvbiBBdXRob3Jp
dHkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDHYpL+/h8M/iVE41cV
k2UB9Zg6KG9u8B/DALyHk+0Zwdp4P1y6uwJkV1UdvglPhOdevkX2f6mP6vlW9OF/
a8wpyXvAzGNBGmY+qBZYJf+uhiA+M+MJcl35QojghpBYGLpe9JLqfTtzNxL9Gzaj
NGIuRux68wTFEeSghm5qzgw/mlM6CBhDQs6jqx4eiHMg3m51JEtZqEnmsCG9VZ6y
Vu1nhIjQjEiNpxYc0tzNt5rlf6virFGw8uIWDAi7r+ZvEgtQOPaIOyB3lFi4M1UB
nPArbkw6LPGgmUsfjNh8J5/hWSs7f88fxEzcWKkTWDpYfiRxmf6bYWEDj8AuxaqY
cmltAgMBAAGjggFxMIIBbTALBgNVHQ8EBAMCAYYwEgYDVR0TAQH/BAgwBgEB/wIB
ATAdBgNVHQ4EFgQUFwCD1fvMVkOoI2MHWaxMskH+3u8wEAYJKwYBBAGCNxUBBAMC
AQAwggEXBgNVHSAEggEOMIIBCjCCAQYGBikBAQEBATCB+zCB+AYIKwYBBQUHAgIw
gesegegAVABoAGkAcwAgAEMAZQByAHQAaQBmAGkAYwBhAHQAaQBvAG4AIABBAHUA
dABoAG8AcgBpAHQAeQAgACgAQwBBACkAIABpAHMAIABhAG4AIABNAEQAQQAgAHIA
ZQBzAG8AdQByAGMAZQAuACAAIABDAGUAcgB0AGkAZgBpAGMAYQB0AGUAcwAgAGkA
cwBzAHUAZQBkACAAYgB5ACAAdABoAGkAcwAgAEMAQQAgAGEAcgBlACAAZgBvAHIA
IABNAEQAQQAgAG8AZgBmAGkAYwBpAGEAbAAgAHUAcwBlACAAbwBuAGwAeQAuMA0G
CSqGSIb3DQEBCwUAA4IBAQBKaACPQTSNrktD2KTyD+izsBjj/bJWBf4qtviNIpVY
gFf6EE9hIOuZO7OT9piCEYvYja5RN7S5MbqtVmIzGmqvrVC2fHoVdn4XvI5oGjGw
upKN+rSh3hiCzmSSEjyboAFl71DxnQ4p1+8hSmKrqAhZ3RDw9dK01iNc7KyUwIR/
JvPriZ0pePdO88GlaNIse0/WJNFi2ie0rzlbbW5FuoABQZ6eCOmCBVRrGOkHEgk8
SHM5GYu+eAO5B3hFI/1Td89Z8VgeMlcT1nWh5QllHwXZHbxXtJXXCQw/iqnmkki5
YlkywhtgnI892XD6ANV39qYA+5mRpb1VcbXb+9So57dU
-----END CERTIFICATE-----
EOC
sudo mv /tmp/mda-root.crt $mdaCertDir/mda-root.crt
sudo chmod 644 $mdaCertDir/mda-root.crt

sudo cat << EOC > /tmp/mda-interm.crt
-----BEGIN CERTIFICATE-----
MIIISjCCBzKgAwIBAgITFgAAAAViVbG3LVBvsQAAAAAABTANBgkqhkiG9w0BAQsF
ADBoMRIwEAYKCZImiZPyLGQBGRYCQ0ExEzARBgoJkiaJk/IsZAEZFgNNREExEjAQ
BgoJkiaJk/IsZAEZFgJEUzEpMCcGA1UEAxMgTURBIFJvb3QgQ2VydGlmaWNhdGlv
biBBdXRob3JpdHkwHhcNMTUwNzIzMjIxODM4WhcNMjUwNzIzMjIyODM4WjBwMRIw
EAYKCZImiZPyLGQBGRYCY2ExEzARBgoJkiaJk/IsZAEZFgNtZGExEjAQBgoJkiaJ
k/IsZAEZFgJkczExMC8GA1UEAxMoTURBIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0
aW9uIEF1dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJJD
ukTOzcAoe2vtpc2JjxHSbHXnoFypfj/mufBA6HRY32Mtk2C82aOEeW7eLfiAHGvV
KztuqOcoynIxKnubFq+AI1mXi183EX+rU3BXukCU110Vf30mWPdmGvKl2ITWFTfz
eZ7agpPq/WqviR7TG/qWJC1XZIahGMsH2xLYkQgO3BxXyDlSb+HLP47PX5veVSuH
5XDRgb8iqb7uVbIXFLgn0eWEAjgziOBpAXm0Xu8G9t9AOdQmjNH6rBH5noBx524G
E7Op4xRzGoFgurL4ea8RhipjxuD2myL+Ss/LoRxPfsU6Iwfo0CxgZY9deFId4GML
+eyOgYPJ7nXBqY/gHgkCAwEAAaOCBOMwggTfMBAGCSsGAQQBgjcVAQQDAgEAMB0G
A1UdDgQWBBTY70FfubDkMf71dCQIrPL5+0nPIzCCARcGA1UdIASCAQ4wggEKMIIB
BgYGKQEBAQEBMIH7MIH4BggrBgEFBQcCAjCB6x6B6ABUAGgAaQBzACAAQwBlAHIA
dABpAGYAaQBjAGEAdABpAG8AbgAgAEEAdQB0AGgAbwByAGkAdAB5ACAAKABDAEEA
KQAgAGkAcwAgAGEAbgAgAE0ARABBACAAcgBlAHMAbwB1AHIAYwBlAC4AIAAgAEMA
ZQByAHQAaQBmAGkAYwBhAHQAZQBzACAAaQBzAHMAdQBlAGQAIABiAHkAIAB0AGgA
aQBzACAAQwBBACAAYQByAGUAIABmAG8AcgAgAE0ARABBACAAbwBmAGYAaQBjAGkA
YQBsACAAdQBzAGUAIABvAG4AbAB5AC4wGQYJKwYBBAGCNxQCBAweCgBTAHUAYgBD
AEEwCwYDVR0PBAQDAgGGMBIGA1UdEwEB/wQIMAYBAf8CAQAwHwYDVR0jBBgwFoAU
FwCD1fvMVkOoI2MHWaxMskH+3u8wggGJBgNVHR8EggGAMIIBfDCCAXigggF0oIIB
cIZMaHR0cDovL2NydDAxLmRzLm1kYS5jYS9jZXJ0ZW5yb2xsL01EQSUyMFJvb3Ql
MjBDZXJ0aWZpY2F0aW9uJTIwQXV0aG9yaXR5LmNybIZMaHR0cDovL2NydDAyLmRz
Lm1kYS5jYS9jZXJ0ZW5yb2xsL01EQSUyMFJvb3QlMjBDZXJ0aWZpY2F0aW9uJTIw
QXV0aG9yaXR5LmNybIaB0WxkYXA6Ly8vQ049TURBJTIwUm9vdCUyMENlcnRpZmlj
YXRpb24lMjBBdXRob3JpdHksQ049Q1JUUlRSTUQwMSxDTj1DRFAsQ049UHVibGlj
JTIwS2V5JTIwU2VydmljZXMsQ049U2VydmljZXMsQ049Q29uZmlndXJhdGlvbixE
Qz1kcyxEQz1tZGEsREM9Y2E/Y2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdD9iYXNl
P29iamVjdENsYXNzPWNSTERpc3RyaWJ1dGlvblBvaW50MIIBpQYIKwYBBQUHAQEE
ggGXMIIBkzBjBggrBgEFBQcwAoZXaHR0cDovL2NydDAxLmRzLm1kYS5jYS9jZXJ0
ZW5yb2xsL0NSVFJUUk1EMDFfTURBJTIwUm9vdCUyMENlcnRpZmljYXRpb24lMjBB
dXRob3JpdHkuY3J0MGMGCCsGAQUFBzAChldodHRwOi8vY3J0MDIuZHMubWRhLmNh
L2NlcnRlbnJvbGwvQ1JUUlRSTUQwMV9NREElMjBSb290JTIwQ2VydGlmaWNhdGlv
biUyMEF1dGhvcml0eS5jcnQwgcYGCCsGAQUFBzAChoG5bGRhcDovLy9DTj1NREEl
MjBSb290JTIwQ2VydGlmaWNhdGlvbiUyMEF1dGhvcml0eSxDTj1BSUEsQ049UHVi
bGljJTIwS2V5JTIwU2VydmljZXMsQ049U2VydmljZXMsQ049Q29uZmlndXJhdGlv
bixEQz1kcyxEQz1tZGEsREM9Y2E/Y0FDZXJ0aWZpY2F0ZT9iYXNlP29iamVjdENs
YXNzPWNlcnRpZmljYXRpb25BdXRob3JpdHkwDQYJKoZIhvcNAQELBQADggEBADiI
NbZYnzLAcAHupujgpYHikACSJjesIF8TYDl3JjYPP/vxsWwUC3NpHFCqzH1x7UiK
6ImSj/RGq/30V/5nWDluq45q/lPxct0TtiypJOOStqlghJWtaeAra4Zg3dP/ZBc3
dREYUFndVkZjSLyq0BRmgSUASW6VwEaScNpvy9UkZ/ZoWRM2vSh0kDBIK43ytDmN
smyYfkLliD45Myk+ugc8CY3Ut8KxVg9L61uCTMpeKNddtOIhnNbTj2QVvnZunDqb
oIHeggpHXnN47mM57IRWcO98yq+T+/TMavLP5LX81atTP9YlDr2E+tYJzMur0BMW
OeXQUgdCvQKcOKE4i6s=
-----END CERTIFICATE-----
EOC
sudo mv /tmp/mda-interm.crt $mdaCertDir/mda-interm.crt
sudo chmod 644 $mdaCertDir/mda-interm.crt

sudo update-ca-certificates
exit $?
